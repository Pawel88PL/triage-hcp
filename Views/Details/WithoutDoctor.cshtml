@model triage_hcp.Models.Patient
<link rel="stylesheet" href="~/css/details.css" asp-append-version="true" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

@{
    ViewData["Title"] = "Przypisz lekarza!";
    Layout = "~/Views/Shared/_Layout.cshtml";

}

<div class="container">
    <div class="row">
        <form asp-action="Update">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <input type="hidden" asp-for="PatientId" />

            <div style="display:none">

                @await Html.PartialAsync("_HiddenFormFields")

                <select asp-for="WhatNext" class="form-control">
                    <option>@Model.WhatNext</option>
                </select>

                <select asp-for="IsActive" class="form-control">
                    <option>@Model.IsActive</option>
                </select>

                <input type="hidden" id="patientName" value="@Model.Name" />
                <input type="hidden" id="patientSurname" value="@Model.Surname" />
                <input type="hidden" id="patientDocumentUrl"
                    value="@Url.Action("GeneratePatientDocument", "Documentation", new { Id = Model.PatientId })" />

            </div>


            <div class="border shadow p-3 mb-5 bg-white rounded"
                style="padding: 30px; margin:20px; background-color: white">
                <div class="text-center" style="padding: 20px; margin-bottom: 20px; background-color: @Model.Color">
                    <div class="row">
                        <div class="col-8">
                            <div class="row">
                                <div class="col-6">
                                    @if (Model.Color == "red")
                                    {
                                        @if (Model.WaitingTime > 1)
                                        {
                                            <h2>
                                                <span class="animation">
                                                    @Model.Surname?.ToUpper() @Model.Name?.ToUpper()
                                                </span>
                                            </h2>

                                        }
                                        else
                                        {
                                            <h2>
                                                @Model.Surname?.ToUpper() @Model.Name?.ToUpper()
                                            </h2>
                                        }
                                    }

                                    @if (Model.Color == "orange")
                                    {
                                        @if (Model.WaitingTime > 10)
                                        {
                                            <h2>
                                                <span class="animation">
                                                    @Model.Surname?.ToUpper() @Model.Name?.ToUpper()
                                                </span>
                                            </h2>

                                        }
                                        else
                                        {
                                            <h2>
                                                @Model.Surname?.ToUpper() @Model.Name?.ToUpper()
                                            </h2>
                                        }
                                    }

                                    @if (Model.Color == "yellow")
                                    {
                                        @if (Model.WaitingTime > 60)
                                        {
                                            <h2>
                                                <span class="animation">
                                                    @Model.Surname?.ToUpper() @Model.Name?.ToUpper()
                                                </span>
                                            </h2>

                                        }
                                        else
                                        {
                                            <h2>
                                                @Model.Surname?.ToUpper() @Model.Name?.ToUpper()
                                            </h2>
                                        }
                                    }

                                    @if (Model.Color == "lightgreen")
                                    {
                                        @if (Model.WaitingTime > 120)
                                        {
                                            <h2>
                                                <span class="animation">
                                                    @Model.Surname?.ToUpper() @Model.Name?.ToUpper()
                                                </span>
                                            </h2>

                                        }
                                        else
                                        {
                                            <h2>
                                                @Model.Surname?.ToUpper() @Model.Name?.ToUpper()
                                            </h2>
                                        }
                                    }

                                    @if (Model.Color == "lightskyblue")
                                    {
                                        @if (Model.WaitingTime > 240)
                                        {
                                            <h2>
                                                <span class="animation">
                                                    @Model.Surname?.ToUpper() @Model.Name?.ToUpper()
                                                </span>
                                            </h2>

                                        }
                                        else
                                        {
                                            <h2>
                                                @Model.Surname?.ToUpper() @Model.Name?.ToUpper()
                                            </h2>
                                        }
                                    }


                                    <h5>@Model.Gender @Model.Age lat</h5>
                                    <h5>PESEL: @Model.Pesel</h5>
                                </div>

                                <div class="col-6">
                                    @if (Model.Color == "red")
                                    {
                                        @if (Model.WaitingTime > 1)
                                        {
                                            <span class="animation">
                                                <h1>@Model.StartTime.ToString("t")</h1>
                                                <h4>@Model.StartTime.ToString("D")</h4>
                                                <p>Czas oczekiwania na lekarza: <b>@Model.WaitingTime</b> minut</p>
                                            </span>
                                        }
                                        else
                                        {
                                            <h1>@Model.StartTime.ToString("t")</h1>
                                            <h4>@Model.StartTime.ToString("D")</h4>
                                            <p>Czas oczekiwania na lekarza: <b>@Model.WaitingTime</b> minut</p>
                                        }
                                    }

                                    @if (Model.Color == "orange")
                                    {
                                        @if (Model.WaitingTime > 10)
                                        {
                                            <span class="animation">
                                                <h1>@Model.StartTime.ToString("t")</h1>
                                                <h4>@Model.StartTime.ToString("D")</h4>
                                                <p>Czas oczekiwania na lekarza: <b>@Model.WaitingTime</b> minut</p>
                                            </span>

                                        }
                                        else
                                        {
                                            <h1>@Model.StartTime.ToString("t")</h1>
                                            <h4>@Model.StartTime.ToString("D")</h4>
                                            <p>Czas oczekiwania na lekarza: <b>@Model.WaitingTime</b> minut</p>
                                        }
                                    }

                                    @if (Model.Color == "yellow")
                                    {
                                        @if (Model.WaitingTime > 60)
                                        {
                                            <span class="animation">
                                                <h1>@Model.StartTime.ToString("t")</h1>
                                                <h4>@Model.StartTime.ToString("D")</h4>
                                                <p>Czas oczekiwania na lekarza: <b>@Model.WaitingTime</b> minut</p>
                                            </span>

                                        }
                                        else
                                        {
                                            <h1>@Model.StartTime.ToString("t")</h1>
                                            <h4>@Model.StartTime.ToString("D")</h4>
                                            <p>Czas oczekiwania na lekarza: <b>@Model.WaitingTime</b> minut</p>
                                        }
                                    }

                                    @if (Model.Color == "lightgreen")
                                    {
                                        @if (Model.WaitingTime > 120)
                                        {
                                            <span class="animation">
                                                <h1>@Model.StartTime.ToString("t")</h1>
                                                <h4>@Model.StartTime.ToString("D")</h4>
                                                <p>Czas oczekiwania na lekarza: <b>@Model.WaitingTime</b> minut</p>
                                            </span>

                                        }
                                        else
                                        {
                                            <h1>@Model.StartTime.ToString("t")</h1>
                                            <h4>@Model.StartTime.ToString("D")</h4>
                                            <p>Czas oczekiwania na lekarza: <b>@Model.WaitingTime</b> minut</p>
                                        }
                                    }

                                    @if (Model.Color == "lightskyblue")
                                    {
                                        @if (Model.WaitingTime > 240)
                                        {
                                            <span class="animation">
                                                <h1>@Model.StartTime.ToString("t")</h1>
                                                <h4>@Model.StartTime.ToString("D")</h4>
                                                <p>Czas oczekiwania na lekarza: <b>@Model.WaitingTime</b> minut</p>
                                            </span>

                                        }
                                        else
                                        {
                                            <h1>@Model.StartTime.ToString("t")</h1>
                                            <h4>@Model.StartTime.ToString("D")</h4>
                                            <p>Czas oczekiwania na lekarza: <b>@Model.WaitingTime</b> minut</p>
                                        }
                                    }

                                </div>
                            </div>
                        </div>

                        <div class="col-3">
                            <h3>@Model.Symptoms?.ToUpper()</h3>
                        </div>
                    </div>
                </div>

                @await Html.PartialAsync("_Details")

                <div class="btn-group" role="group">
                    <button type="submit" class="btn btn-danger">ZAPISZ ZMIANY</button>
                    <a href="@Url.Action("GeneratePatientDocument","Documentation", new { Id = Model!.PatientId })"
                        class="btn btn-secondary">
                        DRUKUJ DOKUMENTY
                    </a>
                    <button asp-controller="ListsOfPatients" asp-action="MainList" class="btn btn-primary">POWRÓT DO
                        LISTY</button>
                </div>
            </div>
        </form>
    </div>
</div>


@section scripts {
    <script src="~/js/printDocumentAlert.js" asp-append-version="true"></script>
}